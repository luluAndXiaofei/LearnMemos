<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app">
      <h1 v-html="title"></h1>
      <p>
        名称： <input type="text" v-model="newProduct.name" /> 库存：
        <input type="number" value="0" v-model="newProduct.stock" />
        <!-- <button @click="addProduct">添加</button> -->
        <button v-on:click="addProduct">添加</button>
      </p>
      <ul>
        <li v-for="(item, i) in products" :key="i">
          {{item.name}} 库存:{{item.stock}}
          <button v-on:click="handleDelete(i)">删除</button>
        </li>
      </ul>

      <p>总库存: {{totolStock}}</p>

      <a v-bind:href="link">{{linkValue}}</a>
      <p>
        <input type="text" v-model="link" />链接地址
        <input type="text" v-model="linkValue" />链接网站
      </p>

      <!-- <h2 v-if="products.length===0"> -->
      <h2 v-show="products.length===0">
        没有商品
      </h2>
      <div>
        姓: {{firstName}} , 名: {{lastName}}, 全名: {{fullName}}
      </div>
    </div>
    <script src="vue.min.js"></script>
    <script>
      var vm = new Vue({
        // 模版方式2 写template
        // template: `<div id="app">
        //             <h1>
        //                 {{title}}
        //             </h1>
        //             <p>
        //             名称： <input type="text" v-model="newProduct.name">
        //             库存： <input type="number" value="0" v-model="newProduct.stock">
        //             <button @click="addProduct">添加</button>
        //             </p>
        //             <ul>
        //             <li v-for="(item, i) in products" :key="i">
        //                 {{item.name}}
        //                 库存:{{item.stock}}
        //             </li>
        //             </ul>
        //         </div>`,

        // 模版方式1 写el
        // el: "#app",
        data: {
          title: `<span style="color:red">商品管理</span>`,
          link: "http://www.baidu.com",
          linkValue: "百度",
          newProduct: {
            name: "",
            stock: 10,
          },
          products: [
            { name: "iphone", stock: 10 },
            { name: "xiao mi", stock: 5 },
            { name: "huawei", stock: 0 },
          ],
          firstName: "Yuan",
          lastName: "jin",
        },

        computed: {
          fullName() {
            return this.lastName + this.firstName;
          },
          totolStock() {
            return this.products.reduce((x, y) => {
              return x + y.stock;
            }, 0);
          },
        },

        methods: {
          addProduct() {
            this.products.push({
              name: this.newProduct.name,
              stock: this.newProduct.stock,
            });
          },
          handleDelete(i) {
            // splice从第i位开始删除1个元素
            this.products.splice(i, 1);
          },
        },
        // 模版方式3 创建虚拟DOM节点
        // render(createElement) {
        //     return createElement("h1", "abc");
        // }
      });

      vm.$mount("#app");
    </script>
  </body>
</html>
